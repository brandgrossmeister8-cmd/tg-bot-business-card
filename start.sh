#!/bin/bash

# ะััะฐะฝะฐะฒะปะธะฒะฐะตะผ ะฒัะต ะฟัะพัะตััั ะฑะพัะฐ
echo "๐ ะััะฐะฝะฐะฒะปะธะฒะฐะตะผ ะฒัะต ะฟัะพัะตััั ะฑะพัะฐ..."
pkill -9 -f "node.*bot.js" 2>/dev/null
pkill -9 node 2>/dev/null

# ะะดะตะผ 3 ัะตะบัะฝะดั ะดะปั ะฟะพะปะฝะพะน ะพััะฐะฝะพะฒะบะธ
sleep 3

# ะัะพะฒะตััะตะผ, ััะพ ะฟัะพัะตััั ะพััะฐะฝะพะฒะปะตะฝั
echo "๐ ะัะพะฒะตััะตะผ ะฟัะพัะตััั..."
PROCESSES=$(ps aux | grep "node.*bot.js" | grep -v grep | wc -l)
if [ "$PROCESSES" -gt 0 ]; then
  echo "โ๏ธ  ะะฐะนะดะตะฝั ะตัะต ะฟัะพัะตััั, ะพััะฐะฝะฐะฒะปะธะฒะฐะตะผ ะฟัะธะฝัะดะธัะตะปัะฝะพ..."
  ps aux | grep "node.*bot.js" | grep -v grep | awk '{print $2}' | xargs kill -9 2>/dev/null
  sleep 2
fi

# ะะฐะฟััะบะฐะตะผ ะฑะพั
echo "๐ ะะฐะฟััะบะฐะตะผ ะฑะพั..."
npm start
